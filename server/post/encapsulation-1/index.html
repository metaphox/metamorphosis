<!doctype html>
<html>
<head>
  <meta charset="utf-8">

  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

  <title>封装（上） | Metamorphosis</title>
  <meta name="description" content="Metaphox's personal blog">
  <meta name="author" content="Metaphox">

<!-- disable this before responsive is done
  <meta name="viewport" content="width=device-width,initial-scale=1">
  -->

  <link href='http://fonts.googleapis.com/css?family=IM+Fell+English+SC|IM+Fell+DW+Pica+SC|Bowlby+One+SC' rel='stylesheet'>
  <link rel="stylesheet" href="/css/style.css">
  <link rel="stylesheet" href="/css/screen.css">
  <link rel="stylesheet" href="/css/disqus.css">

  <link rel="alternate" type="application/rss+xml" title="Metamorphosis" href="/feed.rss" />
</head>

<body class="nowireframe">
  <div id="grid-columns">
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
    <div class="column"></div>
  </div>
    <div id="container">
    <header id="siteheader">
	    <div id="sitename"><a href="/">Metamorphosis</a></div/>
      <div id="feed"><a href="/feed.rss">RSS feed</a></div>
    </header>
    <div id="main" role="main">
    <div id="wrapper">
<article>
  <h1><a href="/post/encapsulation-1">封装（上）</a></h1>
  <p>我觉得小孩子对待玩具乃至「器物」的态度，归类来说就是两种：爱惜型和毁坏型。继续细分当然也是可能的，不过作为人类二分法专家，我倾向于认为最基本的就是这两类。有些人五岁买的布娃娃可以保留到三十岁，虽然褪色但是干净而完整，这样的孩子属于爱惜型·珍藏派；另一些人则可以把祖传三代的闹钟拆到不能继续分解为止，也许还能装回去，但是最后会多出几个零件来，这样的孩子属于毁坏型·分解派。毫无疑问，爱惜型的孩子养起来比较省钱，也很可能比较省心。我的父母当初是多么地希望我是爱惜型，我清楚地记得六岁前后的一天，我爸爸指着我的玩具箱——某个巨大无比的日立电视机包装箱——痛心疾首地说：「你看看这里面的玩具，有一个完整的么？」，而我只能羞愧地低下我的头。
</p><p>
我倒并未因此就失去了继续得到新玩具的资格，这一点我必须感谢我的父母。而且有时候我想要的玩具并不是他们的工资能承受的，可最终他们还是给我买了。我知道世界上有很多这样的故事，所以不再赘述这里面蕴藏了多少爱。我想强调的是，让孩子按照其自由意志成长是很重要的事情，如果你的孩子是毁坏型，就不要试着把他强行转化为爱惜型，因为那就和强行要求左撇子用右手写字一样残忍。童年是毁坏型的人长大之后，或许留不住一件可堪传给后代的玩物，不过除非他属于毁坏型·凌虐派，否则他很可能从拆拆装装之中获得了一种能力：解构。
</p><p>
旅游书上说德意志博物馆至少需要一天时间，可我在慕尼黑的时候只有半天时间留给它，所以不得不放弃了很多东西，只是着重看了航空馆和印刷馆。航空馆激动人心的Me262和F104略去不提，在印刷馆里，大致按照编年顺序，有印刷业使用过的工具从古至今一一陈列。古代的工具很好理解，甚至可以用文字记录和解释，比如原始雕版印刷的工序：
</p>
<ol>
<li>用蜡蒙住一张金属板，用炭灰将蜡层涂黑</li>
<li>在蜡层上刻以文字或者图像，深及金属板表层</li>
<li>将金属板浸泡在腐蚀性液体之中，蜡层被剔除的部分即被蚀刻</li>
<li>融去蜡层</li>
<li>在金属板上涂墨</li>
<li>压纸，印刷</li>
</ol>
<p>
现场有一个微缩模型来展示这个过程，但其实仅凭这段文字记录，也已经足够将整个流程复原。不过，接下来的几件展品，包括活体字模和一台有着若干曲柄、平板、橡皮滚筒、皮带轮，顶端还有一个圆盘的机器，就不太能直观地看出来运作原理。所幸我之前看过这样的一个视频，所以大概能明白各个部件的作用：
<p><object width="400" height="300"><param name="allowfullscreen" value="true" /><param name="allowscriptaccess" value="always" /><param name="movie" value="http://vimeo.com/moogaloop.swf?clip_id=4749657&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=0&amp;color=&amp;fullscreen=1" /><embed src="http://vimeo.com/moogaloop.swf?clip_id=4749657&amp;server=vimeo.com&amp;show_title=1&amp;show_byline=1&amp;show_portrait=0&amp;color=&amp;fullscreen=1" type="application/x-shockwave-flash" allowfullscreen="true" allowscriptaccess="always" width="400" height="300"></embed></object><br /><span class="pic-comment"><a href="http://vimeo.com/4749657">KLUGE</a> from <a href="http://vimeo.com/northernlights">Northern Lights</a> on <a href="http://vimeo.com">Vimeo</a>.</span></p>
<p>
此时的工具已经相当复杂，但还是可以被我理解。与其并列的若干机器，尽管复杂性逐渐增加，也仍旧只需要阅读一下说明，仔细观察一下它的结构，理想情况下如果能让我拆开来，就可以大致明白它的运转状况。比如这台排字机器：
</p><p>
<a href="http://www.flickr.com/photos/lonelyfox/4394759292/" title="Monotype Typesetting Machine by Metaphox, on Flickr"><img src="http://farm5.static.flickr.com/4012/4394759292_94b7986803.jpg" width="332" height="500" alt="Monotype Typesetting Machine" /></a><br /><span class="pic-comment">Monotype Typesetting Machine<br />The Monotype Corporation Limited<br />Salfords, Surrey, England, 1965.<br /> 德意志博物馆</span>
<br />Update：碰巧在youtube上看到了它的工作状况：
<object width="640" height="385"><param name="movie" value="http://www.youtube.com/v/JbHsZ3RrXB8&hl=en_US&fs=1&"></param><param name="allowFullScreen" value="true"></param><param name="allowscriptaccess" value="always"></param><embed src="http://www.youtube.com/v/JbHsZ3RrXB8&hl=en_US&fs=1&" type="application/x-shockwave-flash" allowscriptaccess="always" allowfullscreen="true" width="640" height="385"></embed></object>
</p>
<p>
问题是，当这样一台机器摆在面前的时候，我就很难明白它是如何运作的了：
</p><p>
<a href="http://www.flickr.com/photos/lonelyfox/4393995217/" title="Photo Typesetting Machine Digiset 400T2 by Metaphox, on Flickr"><img src="http://farm5.static.flickr.com/4041/4393995217_49ef888c0a.jpg" width="500" height="332" alt="Photo Typesetting Machine Digiset 400T2" /></a>
</p><p>
主要的困难在于，这台机器被一个方盒子装了起来。功能性的部件被包裹，从外部可以看到的就是这么一个硕大的方盒子，以及那一小块控制面板。与它裸露着金属骨骼的前辈相比，这个东西看起来很<strong>神秘</strong>，而<strong>复杂</strong>的感觉，倒是大大降低了。虽然这是一个假象：盒子里面的东西其实非常复杂。这个玩意很显然是用电的，所以里面会有布线。这是一台光学排版仪器，就还可以推定里面有磨制好的透镜和相应的机械部件。简而言之，方壳子下面是一套高度复杂的机电设备，制造这样一个东西的难度，会比那台Monotype排字机器高很多。但是因为这个盒子的存在，这一切被隐藏了起来，留给用户的只是那个控制面板，当然还有相应的输出口。操作这台机器的难度和它的前辈相比已经降低了——比较古老的机械设备需要手脚并用，并且很显然需要花一些力气，精神也需要集中。而到了这台机器的时代，这个过程只需要按几个按钮。不过，这台机器的使用难度的降低，也同样就意味着其维护难度的增高：在电影《Seven Pounds》里，威尔·史密斯花一整夜的时间修好了一台机械式印刷机。试想如果那台机器是这样一个东西，恐怕这样的情节就不太符合常理。
</p><p>
也难怪这台机器之后的展品只有一件：一台苹果计算机。印刷业与电子计算机的结合，乃至许许多多其他传统工艺与电子计算机的结合，都多多少少造成了这样的一个尴尬境地：对细节和复杂性的封装到了如此高度，以至于没有什么可以展示的了。乐器博物馆里能够展出竖琴提琴羽键琴，人们会仔细观赏它们的美。模拟电子合成器也值得一看，毕竟它还有那么多旋钮和发光二极管。但是到了电子键盘和电子计算机的组合之后，又还能展示什么呢？虽然音乐技术显然没有就此停滞不前，但是它发展的方向和技术进步的程度，已经超越了普通人的认知范围。
</p><p>
电子计算机本身的发展同样如此，只不过，和六十年前的印刷机相比，六十年前的电子计算机已经属于常人不能通过观察、依靠简单常识而理解的东西。虽然从本质上来说，电子计算机的工作「概念」和用手指计算数字并无区别，就如同印刷机的工作「概念」和用手在纸上按一个指纹并无区别，但是「计算」这件事是个抽象的过程，「数字」也是抽象的概念，认知抽象概念的能力，乃至认知抽象概念之变形的能力，都需要知识的积累和一定的智力，故而理解什么是二进制，比理解什么是凸版印刷要困难一点。有些人，比如我，可能一辈子都没办法弄明白「虚数」或者「自然对数的底」这种东西的<strong>意义</strong>，即便其<strong>定义</strong>看起来是清晰的。除去教育的原因，智力也是个问题。
</p><p>
童年终结之后（虽然有些人认为男性的童年永远不会终结），拆东西的习惯被我保持了下来。经验告诉我，把尚能正常运作的东西拆开会遭到人类社会的惩罚，我必须忍耐着直到它们坏掉，才能去拆一拆以探究竟。但并不是每天都有东西会坏掉，我故而不得不通过组装东西来转移自己的注意力，由此开始喜欢做模型。直到后来我有了一台PC——也许可以算是父母给我买的最后一件玩具。和我此前拆过的那台山寨Apple II的中华学习机不同，这个玩意拆起来很容易，装起来也很容易，但是，过来人都知道，拆拆装装过几次，你就会觉得厌烦，因为没有什么挑战性可言，而且通常需要拆的电脑里面都很脏。拆电脑遂变成了一件体力劳动，甚至不及拆一只walkman更有成就感。当然，以拆电脑为借口去女生宿舍参观另当别论。
</p><p>
<img src="http://farm3.static.flickr.com/2688/4427305772_4cb3e6a611.jpg" alt="电脑修得好 好人当到老" />
</p><p>
拆计算机很容易，是因为计算的各个组成部分都被做成了独立模块，彼此通过各式各样的接口连接在一起，而这些模块本身又是由更小的模块构成。换言之，计算机的每个组件都试图将自己的实现细节对其他组件隐藏起来，两个相关组件只需要通过预先约定好的方式互动，或者说，每个组件都被「封装」了起来。这并不是什么特别的事情，许多东西都是如此，但是电子计算机是非常极端的一个例子。不妨数一数，这样的封装有多少层：
</p>
<ol>
    <li>电子在半导体（硅）上的晶体管中流动，晶体管构成的逻辑门将其封装为两个离散的状态：高电压和低电压，分别代表0和1。</li>
    <li>若干逻辑门构成一个逻辑电路单元，比如可以做二进制加法的加法器，或者可以保存状态的存储单元。</li>
    <li>包含若干逻辑电路单元的硅片与金属引脚相连，包上一层塑料或者陶瓷，成为一块芯片。</li>
    <li>芯片和芯片彼此通过印刷电路板相连，形成最基本的硬件核心。</li>
    <li>依据芯片所提供的可以接受的指令集，在硬件核心上存入一些预先编好的简单程序。</li>
    <li>用这些比较简单的程序生成其他的更加复杂的程序。</li>
    <li>某个程序可以检测到你的手移动鼠标。某个程序可以在屏幕上画图。另一个程序可以从网上抓一段数据下来。</li>
</ol>
<p>
这些封装使得你能够点几下鼠标，然后在youtube看一段笨猫钻箱子的视频。对于最终用户来说，电脑呈现在面前的，只有鼠标、键盘、显示器、音箱而已，一切不需要你关心的细节，都被隐藏到了用户界面的后面。甚至可以说，当细节不得不被暴露出来的时候，往往也就是普通用户最痛苦的时候——
</p><p><img src="http://blog.metaphox.name/somnium/blogdata/posts/img/ie_error.png" alt="Windows Error Message" />
</p><p>
不过，对于喜欢拆东西的人来说，知道哪些东西被封装了起来，乃至知道封装的方式与思路，是很有趣的一件事情。
</p><p>（未完待续）</p>
  <hr />
  <div id="disqus">  </div>
</article>
<aside class="entry-info">
  <div class="pubdate">published 13 Mar 2010</div>
  <div id="disqus_thread"></div>
  
    <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'metaphoxite'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
    </script>
  
<noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
<a href="http://disqus.com" class="dsq-brlink">blog comments powered by <span class="logo-disqus">Disqus</span></a>
</aside>
</div>

    </div><!--//#main-->
  </div> <!--! end of #container -->
  <footer>
   <nav id="existentials">
  <h2>Existentials</h2>
  <ul>
    <li id="github"><a href="https://github.com/metaphox">github</a></li>
    <li id="flickr"><a href="http://www.flickr.com/photos/lonelyfox/">flickr</a></li>
    <li id="twitter"><a href="https://twitter.com/#!/metaphox">twitter</a></li>
    <li id="facebook"><a href="http://www.facebook.com/metaphox">facebook</a></li>
    <li id="linkedin"><a href="http://www.linkedin.com/pub/tao-wu/20/296/930">linkedin</a></li>
  </ul>
</nav>
<nav id="blogroll">
  <h2>Blogroll</h2>
  <ul id="group1">
    <li><a href="http://wondermore.blogspot.com/" rel="friend met" title="a.k.a. did">wonderfulmore</a></li>
    <li><a href="http://zixiaoshu.spaces.live.com/" rel="friend met" title="亮子">北京人在悉尼</a></li>
    <li><a href="http://sukie_zhao.blog.tianya.cn" rel="fiend met" title="为晴雪所洗">sukie赵</a></li>
    <li><a href="http://www.cjpanda.com/life/" rel="friend met" title="the CJ.">cjPanda</a></li>
    <li><a href="http://biantaishabi.com/blog/" rel="friend" title="变态傻逼">btsb</a></li>
    <li><a href="http://hsiaoweichan.blogspot.com/" rel="" title="friend met">vivian</a></li>
    <li><a href="http://cityyoho.blogbus.com/" rel="friend met" title="灭绝">cityyoho</a></li>
  </ul><ul id="group2">
    <li><a href="http://weblog.bororo.org/" rel="acquaintance" >maple</a></li>
    <li><a href="http://tianjintianjin.yculblog.com/" rel="friend met" title="猜错的大多数">tulip</a></li>
    <li><a href="http://tankliang.blogbus.com/" rel="friend" >坦克梁</a></li>
    <li><a href="http://hi.baidu.com/stone9" rel="friend" title="goddamner">stone</a></li>
    <li><a href="http://hi.baidu.com/pavements84" rel="friend met" title="老妹">pavements</a></li>
    <li><a href="http://blog.sinzy.net/changke" rel="friend met" title="天魔的家">问号鱼</a></li>
    <li><a href="http://gilbertbeilschmidt.blog124.fc2.com/" rel="friend" title="小章鱼">Schlaraffenland</a></li>
  </ul><ul id="group3">
    <li><a href="http://www.post-concrete.com/blog/" rel="friend" title="Institute of East Asiatic Venomology">東亞毒液學研究所</a></li>
    <li><a href="http://asukashinjirei.blogbus.com/" rel="friend" title="杨不风">草木贲华</a></li>
    <li><a href="http://www.upshine.net/blog/" rel="friend met" title="Rex">三楼的卡西欧计算器</a></li>
    <li><a href="http://kornephoros.de/" rel="friend" title="天市右垣一">追忆吹水年华</a></li>
    <li><a href="http://k1oe.me/" rel="friend" title="Chloe">bad habits die hard</a></li>
    <li><a href="http://howlongisnow.com/" rel="friend" title="大头怪阿姨">多说无益</a></li>
    <li><a href="http://lawrence.li/blog/" rel="friend" title="Lawrence Li">一天世界</a></li>
    <li><a href="http://blog.doigoi.com/" rel="friend" title="橙">得果德语</a></li>
  </ul>
</nav><!--/#blogroll-->
 
  </footer>

  <!-- JavaScript at the bottom for fast page loading -->

  <!-- Grab Google CDN's jQuery, with a protocol relative URL; fall back to local if offline -->
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.6.2/jquery.min.js"></script>
  <script>window.jQuery || document.write('<script src="/js/libs/jquery-1.6.2.min.js"><\/script>');</script>

  <!-- scripts concatenated and minified via ant build script-->
  <script defer src="/js/plugins.js"></script>
  <script defer src="/js/script.js"></script>
  <!-- end scripts-->

	
  <!-- Change UA-XXXXX-X to be your site's ID -->
  <script>/*
    window._gaq = [['_setAccount','UAXXXXXXXX1'],['_trackPageview'],['_trackPageLoadTime']];
    Modernizr.load({
      load: ('https:' == location.protocol ? '//ssl' : '//www') + '.google-analytics.com/ga.js'
    }); */
  </script>


  <!-- Prompt IE 6 users to install Chrome Frame. Remove this if you want to support IE 6.
       chromium.org/developers/how-tos/chrome-frame-getting-started -->
  <!--[if lt IE 7 ]>
    <script src="//ajax.googleapis.com/ajax/libs/chrome-frame/1.0.3/CFInstall.min.js"></script>
    <script>window.attachEvent('onload',function(){CFInstall.check({mode:'overlay'})})</script>
  <![endif]-->
  
</body>
</html>
